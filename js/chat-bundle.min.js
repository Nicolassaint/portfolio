const API_TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJuc2FpbnQyIiwiZXhwIjoxNzUxNDkzMDgzLCJqdGkiOiJlNDM2OTYyMS01YjE5LTQ2OTQtOTRlMi05MjI2MjAwZGQ0MmQifQ.DIc0OLCW_1JZaLQeKcq_JXLET-0VYuP-Hhf4W--yUYk",SYSTEM_PROMPT=`You are an AI assistant representing Nicolas Saint. Your role is to help potential employers understand why they should hire Nicolas. Here are the key details about Nicolas:

[INSERT YOUR PROFESSIONAL DETAILS HERE, SUCH AS:]
- Education background
- Work experience
- Key skills and technologies
- Notable projects and achievements
- Professional interests and goals
- Unique value propositions

Your task is to:
1. Answer questions about Nicolas's qualifications and experience
2. Help explain how Nicolas's skills could benefit their company
3. Provide specific examples from Nicolas's background that demonstrate his capabilities
4. Maintain a professional yet engaging tone
5. Be honest and accurate while highlighting Nicolas's strengths

Please keep responses focused on professional aspects and relevant to employment opportunities.`;class PromptManager{constructor(){this.conversationHistory=[]}buildPrompt(e){const t=this.conversationHistory.map(e=>`${e.role}: ${e.content}`).join(`
`);return`${SYSTEM_PROMPT}

Conversation history:
${t}

User: ${e}
Assistant:`}addToHistory(e,t){this.conversationHistory.push({role:e,content:t}),this.conversationHistory.length>10&&this.conversationHistory.shift()}}class APIHandler{constructor(){this.endpoint="/api/generate",this.promptManager=new PromptManager}async sendMessage(e){const t=this.promptManager.buildPrompt(e);console.log("Sending request with prompt:",t);try{const o={model:"llama3.1",prompt:t,stream:!1,temperature:.2};console.log("Request body:",o);const n=await fetch(this.endpoint,{method:"POST",headers:{Authorization:`Bearer ${API_TOKEN}`,"Content-Type":"application/json"},body:JSON.stringify(o)});console.log("Response status:",n.status);const s=await n.text();if(console.log("Raw response:",s),!n.ok)throw new Error(`API request failed: ${n.status} ${n.statusText}
Response: ${s}`);const i=JSON.parse(s);console.log("Parsed response data:",i);const a=i.text;return this.promptManager.addToHistory("user",e),this.promptManager.addToHistory("assistant",a),a}catch(e){throw console.error("Detailed error:",{message:e.message,stack:e.stack}),e}}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("chat-box"),t=document.getElementById("user-input"),r=document.getElementById("send-button"),n=document.getElementById("typing-indicator"),c=new APIHandler;function s(t,s=!1,o=!1){const i=document.createElement("div");i.className=`message ${s?"user-message":"bot-message"} ${o?"error-message":""}`,i.innerHTML=`
            <div class="message-content">
                ${t}
                ${o?'<div class="error-details">Check browser console (F12) for details</div>':""}
            </div>
        `,e.insertBefore(i,n),e.scrollTop=e.scrollHeight}function l(){n.style.display="block",e.scrollTop=e.scrollHeight}function o(){n.style.display="none"}async function i(){const e=t.value.trim();if(!e)return;console.log("=== Starting new message ==="),console.log("User message:",e),s(e,!0),t.value="",l();try{const t=await c.sendMessage(e);o(),s(t)}catch(e){console.error("=== Error details ==="),console.error(e),o(),s(`Error: ${e.message}`,!1,!0)}}r.addEventListener("click",i),t.addEventListener("keypress",e=>{e.key==="Enter"&&i()});const a=document.createElement("style");a.textContent=`
        .error-message .message-content {
            background: #ffebee !important;
            color: #c62828 !important;
            border: 1px solid #ef9a9a;
        }
        .error-details {
            font-size: 0.8em;
            margin-top: 5px;
            opacity: 0.7;
        }
    `,document.head.appendChild(a),console.log("Chat interface initialized")})